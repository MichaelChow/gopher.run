---
title: "äºŒã€Go ç±»å‹ç³»ç»Ÿ"
date: 2024-11-25T01:47:00Z
draft: false
weight: 2000
---

# äºŒã€Go ç±»å‹ç³»ç»Ÿ

Goè¯­è¨€å°†æ•°æ®ç±»å‹åˆ†ä¸ºå››ç±»ï¼š

| **åŸºç¡€ç±»å‹ï¼ˆbasic typeï¼‰** | booleanã€numericã€stringï¼Œæ˜¯Goè¯­è¨€ä¸–ç•Œæ•°æ®çš„åŸå­ã€‚ | 
| --- | --- | 
| **ç»„åˆç±»å‹ï¼ˆaggregate typeï¼‰** | array**ã€**structï¼Œç”±åŸºç¡€ç±»å‹ç»„åˆï¼Œå€¼ç”±å†…å­˜ä¸­çš„ä¸€ç»„å˜é‡æ„æˆï¼Œæ˜¯Goè¯­è¨€ä¸–ç•Œæ•°æ®çš„åˆ†å­ã€‚ | 
| **å¼•ç”¨ç±»å‹ï¼ˆreference typeï¼‰** | pointerã€sliceã€mapã€functionã€**channel**ï¼Œéƒ½**æ˜¯é—´æ¥æŒ‡å‘****ç¨‹åºå˜é‡æˆ–çŠ¶æ€ï¼Œ**æ“ä½œæ‰€å¼•ç”¨æ•°æ®çš„å…¨éƒ¨æ•ˆæœä¼šéåŠè¯¥æ•°æ®çš„å…¨éƒ¨å¼•ç”¨ã€‚ | 
| **æ¥å£ç±»å‹ï¼ˆinterface typeï¼‰** |   | 

| **type** | **byte len** | **zero value** | **comment** | 
| --- | --- | --- | --- | 
| bool | 1 | false |   | 
| byte | 1 | 0 | builtin.go: **type byte = uint8ï¼› ç”¨äº****å¼ºè°ƒæ•°å€¼æ˜¯ä¸€ä¸ªåŸå§‹çš„æ•°æ®ï¼›**uint8çš„ç­‰ä»·åˆ«åç±»å‹ï¼Œåªæ˜¯è¯­æ³•ç³–ï¼Œç¼–è¯‘å™¨ä¼šè¿˜åŸä¸ºuint8ï¼› | 
| rune | 4 | 0 | builtin.go: **type rune = int32ï¼› ç”¨äºè¡¨ç¤ºä¸€ä¸ªUnicode code point;**int32çš„ç­‰ä»·åˆ«åç±»å‹ï¼Œåªæ˜¯è¯­æ³•ç³–ï¼Œç¼–è¯‘å™¨ä¼šè¿˜åŸä¸ºint32ï¼› | 
| uintptr | 4|8 | 0 | æ²¡æœ‰æŒ‡å®šå…·ä½“çš„bitå¤§å°ä½†æ˜¯è¶³ä»¥å®¹çº³æŒ‡é’ˆï¼›åªæœ‰åœ¨åº•å±‚ç¼–ç¨‹æ—¶æ‰éœ€è¦(ç‰¹åˆ«æ˜¯Goè¯­è¨€å’ŒCè¯­è¨€å‡½æ•°åº“æˆ–æ“ä½œç³»ç»Ÿæ¥å£ç›¸äº¤äº’çš„åœ°æ–¹ï¼Œå¦‚unsafe | 
| int,uint | 4|8 | 0 |   | 
| int8ã€uint8 | 1 | 0 | -128 ~ 127ï¼Œæœ€é«˜ä½ç”¨äºè¡¨ç¤ºç¬¦å·ï¼ˆ0è¡¨ç¤ºæ­£æ•°ï¼Œ1è¡¨ç¤ºè´Ÿæ•°ï¼‰ï¼› 0~255 | 
| int16ã€uint16 | 2 | 0 | -32768 ~ 32767ï¼Œ0~65535 | 
| int32ã€uint32 | 4 | 0 | int32ä¸intä¸ºä¸åŒç±»å‹ï¼Œéœ€è¦æ˜¾ç¤ºç±»å‹è½¬æ¢ | 
| int64ã€uint64 | 8 | 0 |   | 
| float32 | 4 | 0.0 | çº¦6ä¸ªåè¿›åˆ¶æ•°çš„ç²¾åº¦ï¼Œ1.4e-45 ~ math.MaxFloat32 3.4e38ï¼Œ**æœ‰æ•ˆbitä½åªæœ‰23ä¸ª**ï¼Œå…¶å®ƒçš„bitä½ç”¨äº**æŒ‡æ•°å’Œç¬¦å·ï¼›** | 
| float64 | 8 | 0.0 | çº¦15ä¸ªåè¿›åˆ¶æ•°çš„ç²¾åº¦ï¼Œé€šå¸¸åº”è¯¥ä¼˜å…ˆä½¿ç”¨float64ç±»å‹è€Œä¸æ˜¯float32ï¼Œ4.9e-324 ~ math.MaxFloat64  1.8e308 | 
| complex64 | 8 |   | å¯¹åº”float32çš„æµ®ç‚¹æ•°ç²¾åº¦ | 
| complex128 | 16 |   | å¯¹åº”float64çš„æµ®ç‚¹æ•°ç²¾åº¦ | 
| string |   | â€œâ€ | len() | 
| array |   |   | len() cap() | 
| struct |   |   |   | 
| function |   | nil |   | 
| interface |   | nil |   | 
| map |   | nil | make(),len() | 
| slice |   | nil | make(),len(),cap() | 
| channel |   | nil | make(),len(),cap() | 



> *è®¡ç®—æœºåº•å±‚å…¨æ˜¯bitï¼Œè€Œ****å®é™…æ“ä½œåˆ™æ˜¯åŸºäºå¤§å°å›ºå®šçš„å•å…ƒä¸­çš„æ•°å€¼ï¼Œç§°ä¸ºå­—ï¼ˆwordï¼‰ï¼Œå¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ã€æ¯”ç‰¹æ•°ç»„ã€å†…å­˜åœ°å€ç­‰****ï¼›è¿›è€Œæ„æˆæ›´å¤§çš„èšåˆç±»å‹ï¼›Goçš„æ•°æ®ç±»å‹å®½æ³›ï¼Œå‘ä¸‹åŒ¹é…ç¡¬ä»¶ç‰¹æ€§ï¼Œå‘ä¸Šæ»¡è¶³ç¨‹åºå‘˜æ‰€éœ€ã€‚*



## Goçš„å†…å­˜å¯¹é½

```go
// è®¡ç®—æœºæœ€åº•å±‚æ˜¯ bitï¼ˆäºŒè¿›åˆ¶ä½ï¼‰
// æ¯ä¸ª bit åªèƒ½æ˜¯ 0 æˆ– 1

// åœ¨ Go ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ“ä½œ bit
var flags uint8 = 0b10101010  // 8 ä¸ª bit
var mask uint8 = 0b00000001   // 1 ä¸ª bit

// bit æ“ä½œ
result := flags & mask         // æŒ‰ä½ä¸
result = flags | mask          // æŒ‰ä½æˆ–
result = flags ^ mask          // æŒ‰ä½å¼‚æˆ–
result = flags << 1            // å·¦ç§»
result = flags >> 1            // å³ç§»

// bit çš„ç‰©ç†å®ç°: åœ¨ç¡¬ä»¶å±‚é¢ï¼Œbit é€šè¿‡ä»¥ä¸‹æ–¹å¼è¡¨ç¤ºï¼š
// - ç”µå‹é«˜ä½ï¼ˆé«˜ç”µå‹ = 1ï¼Œä½ç”µå‹ = 0ï¼‰
// - ç£åŒ–æ–¹å‘ï¼ˆåŒ— = 1ï¼Œå— = 0ï¼‰
// - å…‰ä¿¡å·ï¼ˆæœ‰å…‰ = 1ï¼Œæ— å…‰ = 0ï¼‰
```



```go
// å­—æ˜¯è®¡ç®—æœºå¤„ç†çš„åŸºæœ¬å•ä½
// ç°ä»£è®¡ç®—æœºé€šå¸¸æ˜¯ 64 ä½ï¼ˆ8 å­—èŠ‚ï¼‰

// Go ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”ä¸åŒçš„å­—å¤§å°
var (
    // 8 ä½ï¼ˆ1 å­—èŠ‚ï¼‰
    b byte = 255        // uint8
    
    // 16 ä½ï¼ˆ2 å­—èŠ‚ï¼‰
    s int16 = 32767
    
    // 32 ä½ï¼ˆ4 å­—èŠ‚ï¼‰
    i int32 = 2147483647
    f float32 = 3.14
    
    // 64 ä½ï¼ˆ8 å­—èŠ‚ï¼‰
    l int64 = 9223372036854775807
    d float64 = 3.14159265359
    
    // å¹³å°ç›¸å…³ï¼ˆ32 ä½æˆ– 64 ä½ï¼‰
    n int = 42  // åœ¨ 64 ä½ç³»ç»Ÿä¸Šæ˜¯ 64 ä½
)

// å†…å­˜åœ°å€
// å†…å­˜åœ°å€ä¹Ÿæ˜¯åŸºäºå­—çš„
var x int = 42
var ptr *int = &x

// æŒ‡é’ˆçš„å¤§å°å–å†³äºå¹³å°
fmt.Printf("Pointer size: %d bytes\n", unsafe.Sizeof(ptr))
// 64 ä½ç³»ç»Ÿï¼š8 å­—èŠ‚
// 32 ä½ç³»ç»Ÿï¼š4 å­—èŠ‚
```



```go
// æ•°ç»„æ˜¯ç›¸åŒç±»å‹å…ƒç´ çš„å›ºå®šå¤§å°èšåˆ
// å†…å­˜å¸ƒå±€ï¼šè¿ç»­çš„å­—
// [int][int][int][int][int]
// æ¯ä¸ª int å ç”¨ä¸€ä¸ªå­—ï¼ˆ8 å­—èŠ‚ï¼‰
var arr [5]int = [5]int{1, 2, 3, 4, 5}


// å†…å­˜å¸ƒå±€ï¼š
// [ID: 4å­—èŠ‚][Age: 1å­—èŠ‚][å¡«å……: 3å­—èŠ‚][Name: 16å­—èŠ‚]
// æ€»å¤§å°ï¼š24 å­—èŠ‚ï¼ˆè€ƒè™‘å†…å­˜å¯¹é½ï¼‰
type Person struct {
    ID   int32   // 4 å­—èŠ‚
    Age  uint8   // 1 å­—èŠ‚
    Name string  // 16 å­—èŠ‚ï¼ˆæŒ‡é’ˆ + é•¿åº¦ï¼‰
}


// åˆ‡ç‰‡æœ¬èº«ï¼š24 å­—èŠ‚
// åº•å±‚æ•°ç»„ï¼š40 å­—èŠ‚ï¼ˆ5 * 8ï¼‰
type slice struct {
    ptr *int    // 8 å­—èŠ‚ï¼šæŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆ
    len int     // 8 å­—èŠ‚ï¼šé•¿åº¦
    cap int     // 8 å­—èŠ‚ï¼šå®¹é‡
}
var s []int = []int{1, 2, 3, 4, 5}
```



```go
// æ•´æ•°ç±»å‹
var (
    // 8 ä½
    i8 int8 = 127
    
    // 16 ä½
    i16 int16 = 32767
    
    // 32 ä½
    i32 int32 = 2147483647
    
    // 64 ä½
    i64 int64 = 9223372036854775807
    
    // å¹³å°ç›¸å…³
    i int = 42  // 32 ä½ç³»ç»Ÿï¼š32 ä½ï¼Œ64 ä½ç³»ç»Ÿï¼š64 ä½
)

// æµ®ç‚¹æ•°ç±»å‹
var (
    f32 float32 = 3.14  // 32 ä½ IEEE 754
    f64 float64 = 3.14159265359  // 64 ä½ IEEE 754
)

// å¤æ•°ç±»å‹
var (
    c64 complex64 = 1 + 2i   // 64 ä½ï¼ˆ32 + 32ï¼‰
    c128 complex128 = 1 + 2i  // 128 ä½ï¼ˆ64 + 64ï¼‰
)
```



```go
// é«˜çº§æŠ½è±¡
// å­—ç¬¦ä¸²ï¼šåº•å±‚æ˜¯å­—èŠ‚æ•°ç»„ï¼Œä½†æä¾›é«˜çº§æ¥å£
str := "Hello, ä¸–ç•Œ"
fmt.Println(len(str))        // 13ï¼ˆå­—èŠ‚æ•°ï¼‰
fmt.Println(utf8.RuneCountInString(str))  // 8ï¼ˆå­—ç¬¦æ•°ï¼‰

// åˆ‡ç‰‡ï¼šåŠ¨æ€æ•°ç»„çš„æŠ½è±¡
slice := []int{1, 2, 3, 4, 5}
slice = append(slice, 6)    // åŠ¨æ€å¢é•¿
slice = slice[:3]           // åŠ¨æ€æ”¶ç¼©

// æ˜ å°„ï¼šå“ˆå¸Œè¡¨çš„æŠ½è±¡
m := map[string]int{"a": 1, "b": 2}
m["c"] = 3                 // åŠ¨æ€æ’å…¥
delete(m, "a")             // åŠ¨æ€åˆ é™¤

// ç±»å‹å®‰å…¨
// ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
var x int = 42
var y string = "hello"
// x = y  // ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…

// è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥
func processValue(v interface{}) {
    switch v.(type) {
    case int:
        fmt.Println("Integer:", v)
    case string:
        fmt.Println("String:", v)
    default:
        fmt.Println("Unknown type")
    }
}

```



**å†…å­˜å¸ƒå±€ä¼˜åŒ–ï¼šåˆ©ç”¨ç¡¬ä»¶ç‰¹æ€§**

```go
// ç»“æ„ä½“å­—æ®µé¡ºåºå½±å“ç¼“å­˜æ€§èƒ½
type CacheFriendly struct {
    ID    int64   // 8 å­—èŠ‚
    Value float64 // 8 å­—èŠ‚
    Flag  bool    // 1 å­—èŠ‚
    // å¡«å…… 7 å­—èŠ‚ä»¥ä¿æŒå¯¹é½
}

type CacheUnfriendly struct {
    Flag  bool    // 1 å­—èŠ‚
    // å¡«å…… 7 å­—èŠ‚
    ID    int64   // 8 å­—èŠ‚
    Value float64 // 8 å­—èŠ‚
}
```

**å†…å­˜ç®¡ç†ï¼šä»Â bitÂ åˆ°å¯¹è±¡:**

**å†…å­˜å±‚æ¬¡ï¼š**

```go
// 1. bit çº§åˆ«ï¼šç‰©ç†å†…å­˜
// 2. å­—çº§åˆ«ï¼šCPU å¯„å­˜å™¨
// 3. é¡µçº§åˆ«ï¼šæ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†
// 4. å¯¹è±¡çº§åˆ«ï¼šGo è¿è¡Œæ—¶å†…å­˜ç®¡ç†

// Go çš„å†…å­˜åˆ†é…å™¨
type mspan struct {
    startAddr uintptr  // èµ·å§‹åœ°å€
    npages    uintptr  // é¡µæ•°
    allocBits *gcBits  // åˆ†é…ä½å›¾
    // ... æ›´å¤šå­—æ®µ
}
```

**åƒåœ¾å›æ”¶ï¼š**

```go
// Go çš„ GC å·¥ä½œåœ¨å¯¹è±¡çº§åˆ«ï¼Œä½†åº•å±‚æ˜¯ bit æ“ä½œ
type gcWork struct {
    // å·¥ä½œé˜Ÿåˆ—
    wbuf1, wbuf2 *workbuf
    // æ ‡è®°ä½å›¾
    markrootNext uint32
    markrootDone uint32
}
```





## ğŸ“š ç›®å½•

- [2.1 numericã€boolean](2-1-numeric-boolean/)
- [2.2 string](2-2-string/)
- [2.3 sliceä¸append](2-3-sliceä¸append/)
- [2.4 mapä¸makeã€new](2-4-mapä¸make-new/)
- [2.5 structä¸ç»„åˆã€æ³›å‹](2-5-structä¸ç»„åˆ-æ³›å‹/)
- [2.6 func](2-6-func/)
- [2.7 method](2-7-method/)
- [2.8 interface](2-8-interface/)
- [2.9 errorä¸panic](2-9-errorä¸panic/)
- [2.10 å¸¸ç”¨interface](2-10-å¸¸ç”¨interface/)





















