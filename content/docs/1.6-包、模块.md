---
title: "1.6 åŒ…ã€æ¨¡å—"
description: "å…³äº1.6 åŒ…ã€æ¨¡å—çš„è¯¦ç»†è¯´æ˜"
date: 2025-07-26T12:02:00Z
draft: false

---

# 1.6 åŒ…ã€æ¨¡å—

## ä¸€ã€Go package

Go ç¨‹åºæ˜¯é€šè¿‡å°†åŒ…é“¾æ¥åœ¨ä¸€èµ·æ„å»ºçš„ã€‚ä¸€ä¸ªåŒ…ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæºæ–‡ä»¶æ„æˆï¼Œè¿™äº›æ–‡ä»¶å…±åŒå£°æ˜å±äºè¯¥åŒ…çš„å¸¸é‡ã€ç±»å‹ã€å˜é‡å’Œå‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åŒä¸€åŒ…çš„æ‰€æœ‰æ–‡ä»¶ä¸­è®¿é—®ã€‚è¿™äº›å…ƒç´ å¯ä»¥è¢«å¯¼å‡ºå¹¶åœ¨å¦ä¸€ä¸ªåŒ…ä¸­ä½¿ç”¨ã€‚



ä¸€ä¸ªä¸­ç­‰è§„æ¨¡çš„ç¨‹åºå¯èƒ½åŒ…å«10000ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ä½œè€…å¯èƒ½åªé¡»æ€è€ƒå®ƒä»¬å…¶ä¸­çš„10%ï¼Œç”šè‡³ä¸éœ€è¦è®¾è®¡å‡½æ•°ï¼Œå› ä¸ºç»å¤§éƒ¨åˆ†éƒ½æ˜¯å…¶ä»–äººæ¥å†™çš„ï¼Œé€šè¿‡åŒ…æ¥å¤ç”¨ã€‚

**ä»»ä½•åŒ…ç®¡ç†ç³»ç»Ÿçš„ç›®çš„ï¼Œéƒ½æ˜¯é€šè¿‡å¯¹å…³è”çš„ç‰¹æ€§è¿›è¡Œåˆ†ç±»ï¼Œç»„ç»‡æˆä¾¿äºç†è§£å’Œä¿®æ”¹çš„å•å…ƒ**ï¼Œä½¿å…¶ä¸ç¨‹åºçš„å…¶ä»–åŒ…ä¿æŒç‹¬ç«‹ï¼Œä»è€Œæœ‰åŠ©äºè®¾è®¡å’Œç»´æŠ¤å¤§å‹çš„ç¨‹åºã€‚

æ¨¡å—åŒ–å…è®¸åŒ…åœ¨ä¸åŒçš„é¡¹ç›®ä¸­å…±äº«ã€å¤ç”¨ï¼Œåœ¨ç»„ç»‡ä¸­å‘å¸ƒï¼Œæˆ–è€…åœ¨å…¨ä¸–ç•ŒèŒƒå›´å†…ä½¿ç”¨ã€‚

Goæ ‡å‡†åº“ç›®å‰å·²æœ‰344ä¸ªåŒ…ï¼Œä¸ºå¤§å¤šæ•°çš„ç¨‹åºæä¾›äº†å¿…è¦çš„åŸºç¡€æ„ä»¶ã€‚

```shell
(base) âœ  ~ go version
go version go1.24.4 darwin/arm64
(base) âœ  ~ go list std | wc -l
     344
```

Goç¤¾åŒºæœ‰å¾ˆå¤šæˆç†Ÿçš„åŒ…è¢«è®¾è®¡ã€å…±äº«ã€é‡ç”¨å’Œæ”¹è¿›ï¼Œå¯ä»¥é€šè¿‡Â [http://godoc.org](http://godoc.org/)Â æ£€ç´¢ã€‚

![](/images/23c24637-29b5-8014-bcb6-d0963c7c66e3/image_23b24637-29b5-80d6-9d38-d5f3cfbd1570.jpg)





- å®˜æ–¹Go module proxyï¼š [https://proxy.golang.org/](https://proxy.golang.org/)
- å›½å†…ä¸ƒç‰›äº‘Go module proxyï¼š [https://goproxy.cn/](https://goproxy.cn/)




**æ¯ä¸ªåŒ…å®šä¹‰äº†ä¸€ä¸ªä¸åŒçš„å‘½åç©ºé—´ï¼Œæ¥ä½œä¸ºå®ƒçš„æ ‡è¯†ç¬¦**ã€‚

åŒ…é€šè¿‡æ§åˆ¶åå­—æ˜¯å¦å¯¼å‡ºä½¿å…¶å¯¹åŒ…å¤–å¯è§æ¥æä¾›å°è£…èƒ½åŠ›ã€‚é™åˆ¶åŒ…æˆå‘˜çš„å¯è§æ€§ï¼Œä»è€Œéšè—APIåé¢çš„è¾…åŠ©å‡½æ•°å’Œç±»å‹ï¼Œå…è®¸åŒ…çš„ç»´æŠ¤è€…ä¿®æ”¹åŒ…çš„å®ç°è€Œä¸å½±å“åŒ…å¤–éƒ¨çš„ä»£ç ã€‚é™åˆ¶å˜é‡çš„å¯è§æ€§ä¹Ÿå¯ä»¥éšè—å˜é‡ï¼Œè¿™æ ·ä½¿ç”¨è€…ä»…å¯ä»¥é€šè¿‡å¯¼å‡ºå‡½æ•°æ¥å¯¹å…¶è®¿é—®å’Œæ›´æ–°ï¼Œä»–ä»¬å¯ä»¥ä¿ç•™è‡ªå·±çš„ä¸å˜é‡ä»¥åŠåœ¨å¹¶å‘ç¨‹åºä¸­å®ç°äº’æ–¥çš„è®¿é—®ã€‚



Goç¨‹åºçš„ç¼–è¯‘æ¯”å…¶ä»–è¯­è¨€è¦å¿«ï¼Œä¸»è¦åŸå› æœ‰ä¸‰ï¼š

- åŸå› 1ï¼šæ‰€æœ‰çš„å¯¼å…¥éƒ½å¿…é¡»åœ¨æ¯ä¸€ä¸ªæºæ–‡ä»¶çš„**å¼€å¤´è¿›è¡Œæ˜¾å¼å£°æ˜**ï¼Œè¿™æ ·ç¼–è¯‘å™¨åœ¨ç¡®å®šä¾èµ–æ€§çš„æ—¶å€™å°±ä¸éœ€è¦è¯»å–å’Œå¤„ç†æ•´ä¸ªæ–‡ä»¶ï¼›
- åŸå› 2ï¼šåŒ…çš„ä¾èµ–æ€§å½¢æˆ**æœ‰å‘æ— ç¯å›¾**ï¼Œå› ä¸ºæ²¡æœ‰ç¯ï¼Œæ‰€ä»¥åŒ…å¯ä»¥ç‹¬ç«‹ç”šè‡³å¹¶è¡Œç¼–è¯‘ï¼›**æ¯ä¸ªå¯¼å…¥å£°æ˜ä»å½“å‰åŒ…å‘å¯¼å…¥çš„åŒ…å»ºç«‹ä¸€ä¸ªä¾èµ–ã€‚å¦‚æœæœ‰å¾ªç¯ä¾èµ–ï¼Œgo buildå·¥å…·ä¼šæŠ¥é”™**ã€‚
- åŸå› 3ï¼šGoåŒ…ç¼–è¯‘è¾“å‡ºçš„ç›®æ ‡æ–‡ä»¶ä¸ä»…è®°å½•å®ƒè‡ªå·±çš„å¯¼å‡ºä¿¡æ¯ï¼Œ**è¿˜è®°å½•å®ƒæ‰€ä¾èµ–åŒ…çš„å¯¼å‡ºä¿¡æ¯**ã€‚å½“ç¼–è¯‘ä¸€ä¸ªåŒ…æ—¶ï¼Œç¼–è¯‘å™¨å¿…é¡»ä»æ¯ä¸€ä¸ªå¯¼å…¥ä¸­è¯»å–ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œä½†æ˜¯ä¸ä¼šè¶…å‡ºè¿™äº›æ–‡ä»¶ï¼ˆè¯‘æ³¨ï¼š**å¾ˆå¤šéƒ½æ˜¯é‡å¤çš„é—´æ¥ä¾èµ–**ï¼‰ã€‚


å¯¼å…¥è·¯å¾„ï¼šæ¯ä¸€ä¸ªåŒ…éƒ½é€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²è¿›è¡Œæ ‡è¯†ï¼ˆç§°ä¸ºå¯¼å…¥è·¯å¾„ã€åŒ…åï¼‰ï¼Œç”¨åœ¨importå£°æ˜ä¸­ï¼›ä¸ºäº†é¿å…å†²çªï¼Œé™¤äº†æ ‡å‡†åº“ä¸­çš„åŒ…ä¹‹å¤–ï¼Œå…¶ä»–åŒ…çš„å¯¼å…¥è·¯å¾„åº”è¯¥**ä»¥ç½‘ç«™åŸŸåä½œä¸ºè·¯å¾„å¼€å§‹**ï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿æŸ¥æ‰¾åŒ…ã€‚**é€šè¿‡ç©ºè¡Œè¿›è¡Œåˆ†ç»„ï¼Œé€šå¸¸è¡¨ç¤ºä¸åŒé¢†åŸŸå’Œæ–¹é¢çš„åŒ…**ã€‚

å¯¼å…¥é¡ºåºä¸é‡è¦ï¼Œä½†æŒ‰ç…§æƒ¯ä¾‹æ¯ä¸€ç»„éƒ½æŒ‰ç…§å­—æ¯è¿›è¡Œæ’åºã€‚ï¼ˆgofmtå’Œgoimportså·¥å…·éƒ½ä¼šè‡ªåŠ¨è¿›è¡Œåˆ†ç»„å¹¶æ’åºã€‚ï¼‰

Goåœ¨åšæŒå…¶å¼ºç¡¬çš„å¯¼å…¥çš„åŒ…å¿…é¡»æœ‰ä½¿ç”¨å’Œä»£ç æ ¼å¼åŒ–è§„åˆ™çš„è®¾è®¡å“²å­¦ä¸‹ï¼Œé€šè¿‡æä¾›**goimports****å·¥å…·å’Œ****gofmtå·¥å…·**ï¼Œä½¿å¾—ç¨‹åºå‘˜åœ¨ç¼–è¾‘å™¨ä¿å­˜æ—¶ï¼Œè‡ªåŠ¨æ·»åŠ æˆ–åˆ é™¤å¯¼å…¥çš„åŒ…ã€è‡ªåŠ¨æ ¼å¼åŒ–Goæºæ–‡ä»¶ï¼Œå®ç°æ— ç¼ä½“éªŒã€‚ï¼ˆç±»ä¼¼é€æ˜åŠ è§£å¯†ï¼‰

```sql
import (
    "crypto/rand"
		 mrand "math/rand"

    "golang.org/x/net/html"

    "github.com/go-sql-driver/mysql"
)
```

**å¯¼å…¥é‡å‘½åï¼š**

- å¦‚æœéœ€è¦æŠŠä¸¤ä¸ªåå­—ä¸€æ ·çš„åŒ…ï¼ˆå¦‚math/randå’Œcrypto/randï¼‰å¯¼å…¥åˆ°ç¬¬ä¸‰ä¸ªåŒ…ä¸­ï¼Œå¯¼å…¥å£°æ˜å°±å¿…é¡»è‡³å°‘ä¸ºå…¶ä¸­çš„ä¸€ä¸ªæŒ‡å®šä¸€ä¸ªæ›¿ä»£åå­—æ¥é¿å…å†²çªï¼›
- å¦‚æœæœ‰æ—¶ç”¨åˆ°è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œå¯¼å…¥çš„åŒ…åå­—éå¸¸å†—é•¿ï¼Œä½¿ç”¨ä¸€ä¸ªæ›¿ä»£åå­—å¯èƒ½æ›´æ–¹ä¾¿ã€‚åŒæ ·çš„ç¼©å†™åå­—è¦ä¸€ç›´ç”¨ä¸‹å»ï¼Œä»¥é¿å…äº§ç”Ÿæ··æ·†ï¼›
- ç©ºå¯¼å…¥ï¼šå½“éœ€è¦å¯¹åŒ…çº§åˆ«çš„å˜é‡æ‰§è¡Œåˆå§‹åŒ–è¡¨è¾¾å¼æ±‚å€¼ï¼Œå¹¶æ‰§è¡Œå®ƒçš„initå‡½æ•°ï¼Œä½†åˆæœªä½¿ç”¨åŒ…æ—¶ï¼Œä¼šæœ‰â€œunused importâ€ç¼–è¯‘é”™è¯¯ã€‚Goçš„`_`ç©ºç™½æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸èƒ½è¢«è®¿é—®(è¿™é‡ŒåŒºåˆ«äºpython)ï¼›
```go
package png /
import  _ "image/png" // register PNG decoder 

// æœ€ç»ˆçš„æ•ˆæœæ˜¯ï¼Œä¸»ç¨‹åºåªéœ€è¦åŒ¿åå¯¼å…¥ç‰¹å®šå›¾åƒé©±åŠ¨åŒ…å°±å¯ä»¥ç”¨image.Decodeè§£ç å¯¹åº”æ ¼å¼çš„å›¾åƒäº†ã€‚
func Decode(r io.Reader) (image.Image, error)
func DecodeConfig(r io.Reader) (image.Config, error)

func init() {
    const pngHeader = "\x89PNG\r\n\x1a\n"
    image.RegisterFormat("png", pngHeader, Decode, DecodeConfig)
}
```

**åŒ…çš„importå£°æ˜**ï¼šåœ¨æ¯ä¸€ä¸ªGoæºæ–‡ä»¶çš„å¼€å¤´éƒ½éœ€è¦è¿›è¡ŒåŒ…å£°æ˜ã€‚é€šå¸¸åŒ…åæ˜¯å¯¼å…¥è·¯å¾„çš„æœ€åä¸€æ®µï¼Œä½†æœ‰3ä¸ªä¾‹å¤–ï¼š

- ä¾‹å¤–1-mainï¼šå¦‚æœåŒ…å®šä¹‰ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œæ€»æ˜¯ä½¿ç”¨åŒ…åå­—mainï¼Œè¿™æ˜¯å‘Šè¯‰go buildçš„ä¿¡å·ï¼Œå®ƒå¿…é¡»è°ƒç”¨è¿æ¥å™¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼›`package main`
- ä¾‹å¤–2-_testï¼šåŒ…æ‰€åœ¨çš„ç›®å½•ä¸­å¯èƒ½æœ‰ä¸€äº›æ–‡ä»¶åå­—ä»¥_test.goç»“å°¾ï¼ŒåŒ…åä¸­ä¼šå‡ºç°ä»¥_testç»“å°¾ã€‚è¿™æ ·ä¸€ä¸ªç›®å½•ä¸­æœ‰ä¸¤ä¸ªåŒ…ï¼šä¸€ä¸ªæ™®é€šçš„ï¼ŒåŠ ä¸Šä¸€ä¸ªå¤–éƒ¨æµ‹è¯•åŒ…ã€‚**_teståç¼€çš„å¤–éƒ¨æ‹“å±•åŒ…ç”±go testç‹¬ç«‹ç¼–è¯‘ï¼Œå¹¶ä¸”æŒ‡æ˜æ–‡ä»¶å±äºå“ªä¸ªåŒ…**ã€‚å¤–éƒ¨æµ‹è¯•åŒ…ä¸€èˆ¬ç”¨æ¥**é¿å…æµ‹è¯•ä»£ç ä¸­çš„å¾ªç¯ä¾èµ–**
- ä¾‹å¤–3-yaml.v2ï¼šä¸€äº›ä¾èµ–ç‰ˆæœ¬å·çš„ç®¡ç†å·¥å…·ä¼šåœ¨å¯¼å…¥è·¯å¾„åè¿½åŠ ç‰ˆæœ¬å·ä¿¡æ¯ï¼Œå¦‚â€œgopkg.in/yaml.v2â€ã€‚è¿™ç§æƒ…å†µä¸‹**åŒ…çš„åå­—å¹¶ä¸åŒ…å«ç‰ˆæœ¬å·åç¼€**ï¼Œè€Œæ˜¯yamlã€‚
```go
// æ•°æ®åº“åŒ…database/sqlä¹Ÿæ˜¯é‡‡ç”¨äº†ç±»ä¼¼çš„æŠ€æœ¯ï¼Œè®©ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©å¯¼å…¥å¿…è¦çš„æ•°æ®åº“é©±åŠ¨ã€‚ä¾‹å¦‚ï¼š
import (
    "database/sql"
    _ "github.com/lib/pq"              // enable support for Postgres
    _ "github.com/go-sql-driver/mysql" // enable support for MySQL
)

db, err = sql.Open("postgres", dbname) // OK
db, err = sql.Open("mysql", dbname)    // OK
db, err = sql.Open("sqlite3", dbname)  // returns error: unknown driver "sqlite3"
```



**åŒ…çš„å‘½åçº¦å®šï¼š**

**å½“åˆ›å»ºä¸€ä¸ªåŒ…ï¼Œä¸€èˆ¬è¦ç”¨çŸ­å°çš„åŒ…åï¼Œä½†ä¹Ÿä¸èƒ½çŸ­åˆ°åƒåŠ äº†å¯†ä¸€æ ·**ã€‚æ ‡å‡†åº“ä¸­æœ€å¸¸ç”¨çš„åŒ…æœ‰bufioã€bytesã€flagã€fmtã€httpã€ioã€jsonã€osã€sortã€syncå’Œtimeç­‰åŒ…ï¼›

å°½å¯èƒ½ä¿æŒå‘½åçš„**å¯è¯»æ€§å’Œæ— æ­§ä¹‰**ã€‚å¦‚imageutilã€ioutilisç­‰åç§°æ›´å…·ä½“å’Œæ¸…æ™°ï¼Œè€Œä¸è¦æŠŠè¾…åŠ©å·¥å…·åŒ…å‘½åä¸ºutil

é¿å…é€‰æ‹©ç»å¸¸ç”¨äºç›¸å…³çš„å±€éƒ¨å˜é‡çš„åŒ…åï¼Œæˆ–è€…è¿«ä½¿ä½¿ç”¨è€…ä½¿ç”¨é‡å‘½åå¯¼å…¥ï¼Œå¦‚ä½¿ç”¨ä»¥pathå‘½åçš„åŒ…ã€‚

åŒ…åé€šå¸¸ä½¿ç”¨ç»Ÿä¸€çš„å½¢å¼ã€‚æ ‡å‡†åŒ…bytesã€errorså’Œstringsä½¿ç”¨å¤æ•°æ¥é¿å…è¦†ç›–å“åº”çš„é¢„å£°æ˜ç±»å‹ï¼Œä½¿ç”¨go/typesè¿™ä¸ªå½¢å¼ï¼Œæ¥é¿å…å’Œå…³é”®å­—çš„å†²çªã€‚

é¿å…ä½¿ç”¨æœ‰å…¶ä»–å«ä¹‰çš„åŒ…åï¼Œå¦‚temperatureç”¨tempconvï¼Œèƒ½å’Œstrconvç­‰ç±»ä¼¼ã€‚

åŒ…æˆå‘˜å‘½åï¼Œéœ€è¦åŒæ—¶è€ƒè™‘åŒ…åå’Œæˆå‘˜åä¸¤ä¸ªéƒ¨åˆ†å¦‚ä½•å¾ˆå¥½åœ°ç»„åˆå‘½åã€‚ä¸‹é¢æœ‰ä¸€äº›ä¾‹å­ï¼šbytes.Equalã€flag.Intã€http.Getã€json.Marshal

è¿˜æœ‰ä¸€ä¸ª**ä»¥Newå‘½åçš„å‡½æ•°ç”¨äºåˆ›å»ºå®ä¾‹ï¼š**

```go
package rand // "math/rand"

// è¿™å¯èƒ½å¯¼è‡´ä¸€äº›åå­—é‡å¤ï¼Œå¦‚template.Templateæˆ–rand.Randï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›ç§ç±»çš„åŒ…åå¾€å¾€ç‰¹åˆ«çŸ­çš„åŸå› ä¹‹ä¸€ã€‚
type Rand struct{ /* ... */ }
func New(source Source) *Rand
```

åœ¨å¦ä¸€ä¸ªæç«¯ï¼Œåƒnet/httpåŒ…æœ‰å°†è¿‘äºŒåç§ç±»å‹å’Œæ›´å¤šçš„å‡½æ•°ï¼Œä½†åŒ…ä¸­æœ€é‡è¦çš„æˆå‘˜åå­—å´ä¾ç„¶æ˜¯ä¿æŒç®€å•æ˜äº†çš„ï¼šGetã€Postã€Handleã€Errorã€Clientã€Serverç­‰ã€‚



Goçš„å‘½ä»¤è¡Œæ¥å£ä½¿ç”¨â€œç‘å£«å†›åˆ€â€é£æ ¼ï¼Œå¸¦æœ‰åå‡ ä¸ªå­å‘½ä»¤ï¼Œå¦‚getã€runã€buildå’Œfmtã€‚å¯ä»¥è¿è¡Œgo helpæ¥æŸ¥çœ‹å†…ç½®æ–‡æ¡£çš„ç´¢å¼•

```go
$ go
...
    build            compile packages and dependencies
    clean            remove object files
    doc              show documentation for package or symbol
    env              print Go environment information
    fmt              run gofmt on package sources
    get              download and install packages and dependencies
    install          compile and install packages and dependencies
    list             list packages
    run              compile and run Go program
    test             test packages
    version          print Go version
    vet              run go tool vet on packages

Use "go help [command]" for more information about a command.
...
```

ä¸ºäº†è®©é…ç½®æ“ä½œæœ€å°åŒ–ï¼Œgoå·¥å…·éå¸¸ä¾èµ–æƒ¯ä¾‹ã€‚å¦‚: 

- ç»™å®šä¸€ä¸ªGoæºæ–‡ä»¶çš„åç§°ï¼ŒGoè¯­è¨€çš„å·¥å…·å¯ä»¥æ‰¾åˆ°æºæ–‡ä»¶å¯¹åº”çš„åŒ…ï¼Œ**å› ä¸ºæ¯ä¸ªç›®å½•åªåŒ…å«äº†å•ä¸€çš„åŒ…**ï¼Œå¹¶ä¸”åŒ…çš„å¯¼å…¥è·¯å¾„å¯¹åº”äºå·¥ä½œåŒºçš„ç›®å½•ç»“æ„ã€‚
- ç»™å®šä¸€ä¸ªåŒ…çš„å¯¼å…¥è·¯å¾„ï¼ŒGoè¯­è¨€çš„å·¥å…·å¯ä»¥æ‰¾åˆ°å­˜æ”¾ç›®æ ‡æ–‡ä»¶çš„å¯¹åº”ç›®å½•ã€‚ä¹Ÿå¯ä»¥æ ¹æ®å¯¼å…¥è·¯å¾„æ‰¾åˆ°å­˜å‚¨ä»£ç çš„ä»“åº“çš„è¿œç¨‹æœåŠ¡å™¨URLã€‚
**å·¥ä½œåŒºç»“æ„ï¼š****å¤§å¤šæ•°çš„Goè¯­è¨€ç”¨æˆ·åªéœ€è¦è¿›è¡Œå”¯ä¸€çš„é…ç½®æ˜¯GOPATH**ï¼Œå®ƒæŒ‡å®šå·¥ä½œç©ºé—´çš„æ ¹ã€‚å½“éœ€è¦åˆ‡æ¢åˆ°ä¸åŒçš„å·¥ä½œç©ºé—´æ—¶ï¼Œæ›´æ–°GOPATHå˜é‡çš„å€¼å³å¯ã€‚å¦‚åœ¨ç¼–å†™æœ¬ä¹¦æ—¶å°†GOPATHè®¾ç½®ä¸º`$HOME/gobook`ï¼š GOPATHæœ‰ä¸‰ä¸ªå­ç›®å½•ã€‚

- srcå­ç›®å½•åŒ…å«æºæ–‡ä»¶ã€‚æ¯ä¸€ä¸ªåŒ…æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œè¯¥ç›®å½•ç›¸å¯¹äº$GOPATH/srcçš„åå­—æ˜¯åŒ…çš„å¯¼å…¥è·¯å¾„ï¼Œå¦‚ [gopl.io/ch1/helloworld](http://gopl.io/ch1/helloworld)ï¼›
- pkgå­ç›®å½•æ˜¯æ„å»ºå·¥å…·å­˜å‚¨ç¼–è¯‘åçš„åŒ…çš„ä½ç½®ï¼›
- binå­ç›®å½•æ”¾ç½®åƒhelloworldè¿™æ ·çš„å¯æ‰§è¡Œç¨‹åºï¼›
    ```go
    $ export GOPATH=$HOME/gobook
    $ go get gopl.io/...
    ```
`go env`å‘½ä»¤ç”¨äºæŸ¥çœ‹Goè¯­è¨€å·¥å…·æ¶‰åŠçš„æ‰€æœ‰ç¯å¢ƒå˜é‡çš„å€¼ï¼ŒåŒ…æ‹¬æœªè®¾ç½®ç¯å¢ƒå˜é‡çš„é»˜è®¤å€¼ã€‚GOOSç¯å¢ƒå˜é‡ç”¨äºæŒ‡å®šç›®æ ‡æ“ä½œç³»ç»Ÿï¼ˆä¾‹å¦‚androidã€linuxã€darwinæˆ–windowsï¼‰ï¼ŒGOARCHç¯å¢ƒå˜é‡ç”¨äºæŒ‡å®šå¤„ç†å™¨çš„ç±»å‹ï¼Œä¾‹å¦‚amd64ã€386æˆ–armç­‰ã€‚è™½ç„¶GOPATHç¯å¢ƒå˜é‡æ˜¯å”¯ä¸€å¿…é¡»è¦è®¾ç½®çš„ï¼Œä½†æ˜¯å…¶å®ƒç¯å¢ƒå˜é‡ä¹Ÿä¼šå¶å°”ç”¨åˆ°ã€‚

```go
$ go env
GOPATH="/home/gopher/gobook"
GOROOT="/usr/local/go"
GOARCH="amd64"
GOOS="darwin"
...
```



**åŒ…çš„ä¸‹è½½**ï¼šgo getå‘½ä»¤å¯ä»¥ä¸‹è½½å•ä¸€çš„åŒ…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨...ç¬¦å·æ¥ä¸‹è½½å­æ ‘æˆ–ä»“åº“ã€‚åœ¨go getå®ŒæˆåŒ…çš„ä¸‹è½½ä¹‹åï¼Œå®ƒä¼šæ„å»ºå®ƒä»¬ï¼Œç„¶åå®‰è£…åº“å’Œç›¸åº”çš„å‘½ä»¤ã€‚

**åŒ…çš„æ„å»ºï¼š**`go build`å‘½ä»¤ç¼–è¯‘å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šçš„æ¯ä¸ªåŒ…ã€‚å¦‚æœåŒ…æ˜¯ä¸€ä¸ªåº“ï¼Œç»“æœä¼šè¢«èˆå¼ƒï¼›è¿™å¯ä»¥ç”¨äºæ£€æµ‹åŒ…æ˜¯å¯ä»¥æ­£ç¡®ç¼–è¯‘çš„ã€‚å¦‚æœåŒ…çš„åå­—æ˜¯mainï¼Œ`go build`å°†è°ƒç”¨é“¾æ¥å™¨åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œå¯æ‰§è¡Œç¨‹åºçš„åå­—å–å¯¼å…¥è·¯å¾„çš„æœ€åä¸€æ®µã€‚

**ç”±äºæ¯ä¸ªç›®å½•åªåŒ…å«ä¸€ä¸ªåŒ…ï¼Œå› æ­¤æ¯ä¸ªå¯æ‰§è¡Œç¨‹åºæˆ–è€…å«Unixå‘½ä»¤éƒ½éœ€è¦æ”¾åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ç›®å½•ä¸­**ã€‚å¦‚ [golang.org/x/tools/cmd/godoc](http://golang.org/x/tools/cmd/godoc) å‘½ä»¤

å¦‚æœåŒ…åæ˜¯mainï¼Œå¯æ‰§è¡Œç¨‹åºçš„åå­—æ¥è‡ªç¬¬ä¸€ä¸ª.goæ–‡ä»¶åçš„ä¸»ä½“éƒ¨åˆ†ï¼›

å¯¹äºå³ç”¨å³æŠ›å‹çš„ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ„å»ºä¹‹åå°½å¿«è¿è¡Œã€‚go runå‘½ä»¤å°†è¿™ä¸¤æ­¥åˆå¹¶èµ·æ¥ï¼›



é»˜è®¤æƒ…å†µä¸‹ï¼Œgo buildå‘½ä»¤æ„å»ºæ‰€æœ‰éœ€è¦çš„åŒ…ä»¥åŠå®ƒä»¬æ‰€æœ‰çš„ä¾èµ–æ€§ï¼Œç„¶åä¸¢å¼ƒé™¤äº†æœ€ç»ˆå¯æ‰§è¡Œç¨‹åºä¹‹å¤–çš„æ‰€æœ‰ç¼–è¯‘åçš„ä»£ç ã€‚ä¾èµ–æ€§åˆ†æå’Œç¼–è¯‘æœ¬èº«éƒ½éå¸¸å¿«ï¼Œ**ä½†å½“é¡¹ç›®å¢é•¿åˆ°æ•°åä¸ªåŒ…å’Œæ•°åä¸‡è¡Œä»£ç çš„æ—¶å€™ï¼Œé‡æ–°ç¼–è¯‘ä¾èµ–æ€§çš„æ—¶é—´æ˜æ˜¾å˜æ…¢ï¼Œä¹Ÿè®¸æ•°ç§’é’Ÿçš„æ—¶é—´ï¼Œå³ä½¿ä¾èµ–çš„éƒ¨åˆ†æ ¹æœ¬æ²¡æœ‰æ”¹å˜è¿‡**ï¼›

`go install`å‘½ä»¤å’Œ`go build`å‘½ä»¤å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒä¼šä¿å­˜æ¯ä¸ªåŒ…çš„ç¼–è¯‘æˆæœï¼Œè€Œä¸æ˜¯å°†å®ƒä»¬éƒ½ä¸¢å¼ƒã€‚è¢«ç¼–è¯‘çš„åŒ…ä¼šè¢«ä¿å­˜åˆ°$GOPATH/pkgç›®å½•ä¸‹ï¼Œç›®å½•è·¯å¾„å’Œ srcç›®å½•è·¯å¾„å¯¹åº”ï¼Œå¯æ‰§è¡Œç¨‹åºè¢«ä¿å­˜åˆ°$GOPATH/binç›®å½•ã€‚ï¼ˆå¾ˆå¤šç”¨æˆ·ä¼šå°†$GOPATH/binæ·»åŠ åˆ°å¯æ‰§è¡Œç¨‹åºçš„æœç´¢åˆ—è¡¨ä¸­ã€‚ï¼‰è¿˜æœ‰ï¼Œ`go install`å‘½ä»¤å’Œ`go build`å‘½ä»¤éƒ½ä¸ä¼šé‡æ–°ç¼–è¯‘æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„åŒ…ï¼Œè¿™å¯ä»¥ä½¿åç»­æ„å»ºæ›´å¿«æ·

ä¸ºäº†æ–¹ä¾¿ç¼–è¯‘ä¾èµ–çš„åŒ…ï¼Œ`go build -i`å‘½ä»¤å°†å®‰è£…æ¯ä¸ªç›®æ ‡æ‰€ä¾èµ–çš„åŒ…ã€‚



é’ˆå¯¹ä¸åŒæ“ä½œç³»ç»Ÿæˆ–CPUçš„äº¤å‰æ„å»ºä¹Ÿæ˜¯å¾ˆç®€å•çš„ã€‚åªéœ€è¦è®¾ç½®å¥½ç›®æ ‡å¯¹åº”çš„GOOSå’ŒGOARCHï¼Œç„¶åè¿è¡Œæ„å»ºå‘½ä»¤å³å¯ã€‚ä¸‹é¢äº¤å‰ç¼–è¯‘çš„ç¨‹åºå°†è¾“å‡ºå®ƒåœ¨ç¼–è¯‘æ—¶çš„æ“ä½œç³»ç»Ÿå’ŒCPUç±»å‹ï¼š

```go
func main() {
    fmt.Println(runtime.GOOS, runtime.GOARCH)
}

// ä¸‹é¢ä»¥64ä½å’Œ32ä½ç¯å¢ƒåˆ†åˆ«ç¼–è¯‘å’Œæ‰§è¡Œï¼š
$ go build gopl.io/ch10/cross
$ ./cross
darwin amd64

$ GOARCH=386 go build gopl.io/ch10/cross
$ ./cross
darwin 386
```

æœ‰äº›åŒ…å¯èƒ½éœ€è¦é’ˆå¯¹ä¸åŒå¹³å°å’Œå¤„ç†å™¨ç±»å‹ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ä»£ç æ–‡ä»¶ï¼Œä»¥ä¾¿äºå¤„ç†åº•å±‚çš„å¯ç§»æ¤æ€§é—®é¢˜æˆ–ä¸ºä¸€äº›ç‰¹å®šä»£ç æä¾›ä¼˜åŒ–ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶ååŒ…å«äº†ä¸€ä¸ªæ“ä½œç³»ç»Ÿæˆ–å¤„ç†å™¨ç±»å‹åå­—ï¼Œä¾‹å¦‚net_linux.goæˆ–asm_amd64.sï¼ŒGoè¯­è¨€çš„æ„å»ºå·¥å…·å°†åªåœ¨å¯¹åº”çš„å¹³å°ç¼–è¯‘è¿™äº›æ–‡ä»¶ã€‚è¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«çš„æ„å»ºæ³¨é‡Šå‚æ•°å¯ä»¥æä¾›æ›´å¤šçš„æ„å»ºè¿‡ç¨‹æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œæ–‡ä»¶ä¸­å¯èƒ½åŒ…å«ä¸‹é¢çš„æ³¨é‡Šï¼š

```shell
// +build linux darwin
```

åœ¨åŒ…å£°æ˜å’ŒåŒ…æ³¨é‡Šçš„å‰é¢ï¼Œè¯¥æ„å»ºæ³¨é‡Šå‚æ•°å‘Šè¯‰`go build`åªåœ¨ç¼–è¯‘ç¨‹åºå¯¹åº”çš„ç›®æ ‡æ“ä½œç³»ç»Ÿæ˜¯Linuxæˆ–Mac OS Xæ—¶æ‰ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶ã€‚ä¸‹é¢çš„æ„å»ºæ³¨é‡Šåˆ™è¡¨ç¤ºä¸ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶ï¼š

```shell
// +build ignore
```



**åŒ…çš„æ–‡æ¡£åŒ–ï¼šGoé£æ ¼å¼ºçƒˆé¼“åŠ±æœ‰è‰¯å¥½çš„åŒ…APIæ–‡æ¡£ã€‚æ¯ä¸€ä¸ªå¯¼å‡ºçš„åŒ…æˆå‘˜çš„å£°æ˜ä»¥åŠåŒ…å£°æ˜è‡ªèº«åº”è¯¥ç«‹åˆ»ä½¿ç”¨æ³¨é‡Šæ¥æè¿°å®ƒçš„ç›®çš„å’Œç”¨é€”ã€‚**

**Goæ–‡æ¡£æ³¨é‡Šåº”å½“ä¿æŒç®€æ´ï¼Œæ–‡æ¡£éœ€è¦åƒä»£ç ä¸€æ ·ç»´æŠ¤**ã€‚ä½¿ç”¨å£°æ˜çš„åŒ…åä½œä¸ºå¼€å¤´çš„ç¬¬ä¸€å¥æ³¨é‡Šé€šå¸¸æ˜¯æ€»ç»“ã€‚å‡½æ•°å‚æ•°å’Œå…¶ä»–çš„æ ‡è¯†ç¬¦å¹¶ä¸éœ€è¦ç”¨å¼•å·æˆ–æ‹¬å·ç‰¹åˆ«æ ‡æ³¨ã€‚

```go
// **Fprintf** formats according to a format specifier and writes to w.
// It returns the number of bytes written and any write error encountered.
// ç¬¬ä¸€è¡Œé€šå¸¸æ˜¯æ‘˜è¦è¯´æ˜ï¼Œä»¥è¢«æ³¨é‡Šè€…çš„åå­—å¼€å¤´ã€‚æ³¨é‡Šä¸­å‡½æ•°çš„å‚æ•°æˆ–å…¶å®ƒçš„æ ‡è¯†ç¬¦å¹¶ä¸éœ€è¦é¢å¤–çš„å¼•å·æˆ–å…¶å®ƒæ ‡è®°æ³¨æ˜ã€‚
func Fprintf(w io.Writer, format string, a ...interface{}) (int, error)

// Fprintfå‡½æ•°æ ¼å¼åŒ–çš„ç»†èŠ‚åœ¨fmtåŒ…æ–‡æ¡£ä¸­æè¿°ã€‚å¦‚æœæ³¨é‡Šåç´§è·Ÿç€åŒ…å£°æ˜è¯­å¥ï¼Œé‚£æ³¨é‡Šå¯¹åº”æ•´ä¸ªåŒ…çš„æ–‡æ¡£ã€‚åŒ…æ–‡æ¡£å¯¹åº”çš„æ³¨é‡Šåªèƒ½æœ‰ä¸€ä¸ªï¼ˆè¯‘æ³¨ï¼šå…¶å®å¯ä»¥æœ‰å¤šä¸ªï¼Œå®ƒä»¬ä¼šç»„åˆæˆä¸€ä¸ªåŒ…æ–‡æ¡£æ³¨é‡Šï¼‰ï¼ŒåŒ…æ³¨é‡Šå¯ä»¥å‡ºç°åœ¨ä»»ä½•ä¸€ä¸ªæºæ–‡ä»¶ä¸­ã€‚
// å¦‚æœåŒ…çš„æ³¨é‡Šå†…å®¹æ¯”è¾ƒé•¿ï¼Œä¸€èˆ¬ä¼šæ”¾åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æºæ–‡ä»¶ä¸­ï¼›fmtåŒ…æ³¨é‡Šå°±æœ‰300è¡Œä¹‹å¤šã€‚è¿™ä¸ªä¸“é—¨ç”¨äºä¿å­˜åŒ…æ–‡æ¡£çš„æºæ–‡ä»¶é€šå¸¸å«doc.goã€‚
```

æ¯”è¾ƒé•¿çš„åŒ…æ³¨é‡Šå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„æ³¨é‡Šæ–‡ä»¶ï¼Œfmtçš„æ³¨é‡Šè¶…è¿‡300è¡Œï¼Œæ–‡ä»¶åé€šå¸¸å«doc.goï¼›

```go
$ go doc time  // æ‰“å°å…¶åæ‰€æŒ‡å®šçš„å®ä½“çš„å£°æ˜ä¸æ–‡æ¡£æ³¨é‡Šï¼Œå¦‚ä¸€ä¸ªåŒ…
$ go doc time.Since  // æŸä¸ªå…·ä½“çš„åŒ…æˆå‘˜
$ go doc time.Duration.Seconds  // ä¸€ä¸ªæ–¹æ³•
$ go doc json.decode  // è¯¥å‘½ä»¤å¹¶ä¸éœ€è¦è¾“å…¥å®Œæ•´çš„åŒ…å¯¼å…¥è·¯å¾„æˆ–æ­£ç¡®çš„å¤§å°å†™
```

godocçš„åœ¨çº¿æœåŠ¡Â [https://godoc.org](https://godoc.org/)Â ï¼ŒåŒ…å«äº†æˆåƒä¸Šä¸‡çš„å¼€æºåŒ…çš„æ£€ç´¢å·¥å…·ã€‚

```go
$ godoc -http :8000 // å…¶ä¸­-analysis=typeå’Œ-analysis=pointerå‘½ä»¤è¡Œæ ‡å¿—å‚æ•°ç”¨äºæ‰“å¼€æ–‡æ¡£å’Œä»£ç ä¸­å…³äºé™æ€åˆ†æçš„ç»“æœã€‚
// åœ¨æµè§ˆå™¨æŸ¥çœ‹ http://localhost:8000/pkg é¡µé¢
```



**internalåŒ…ï¼šGoè¯­è¨€çš„æ„å»ºå·¥å…·å¯¹åŒ…å«internalåå­—çš„è·¯å¾„æ®µçš„åŒ…å¯¼å…¥è·¯å¾„åšäº†ç‰¹æ®Šå¤„ç†ï¼Œä¸€ä¸ªinternalåŒ…åªèƒ½è¢«å’Œinternalç›®å½•æœ‰åŒä¸€ä¸ªçˆ¶ç›®å½•çš„åŒ…æ‰€å¯¼å…¥**ã€‚

è¿™ç§æ–¹å¼å®šä¹‰æ ‡è¯†ç¬¦å¯ä»¥è¢«ä¸€ä¸ªå°çš„å¯ä¿¡ä»»çš„åŒ…é›†åˆè®¿é—®ï¼Œä½†ä¸æ˜¯æ‰€æœ‰äººå¯ä»¥è®¿é—®ï¼›å¦‚ï¼šå½“æˆ‘ä»¬è®¡åˆ’å°†ä¸€ä¸ªå¤§çš„åŒ…æ‹†åˆ†ä¸ºå¾ˆå¤šå°çš„æ›´å®¹æ˜“ç»´æŠ¤çš„å­åŒ…ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æƒ³å°†å†…éƒ¨çš„å­åŒ…ç»“æ„ä¹Ÿå®Œå…¨æš´éœ²å‡ºå»ï¼› 

å¦‚ï¼Œnet/http/internal/chunkedå†…éƒ¨åŒ…åªèƒ½è¢«net/http/httputilæˆ–net/httpåŒ…å¯¼å…¥ï¼Œä½†æ˜¯ä¸èƒ½è¢«net/urlåŒ…å¯¼å…¥ã€‚ä¸è¿‡net/urlåŒ…å´å¯ä»¥å¯¼å…¥net/http/httputilåŒ…ã€‚

```go
net/http
net/http/**internal**/chunked
net/http/httputil
net/url
```



**åŒ…çš„æŸ¥è¯¢ï¼šgo listå·¥å…·ä¸ŠæŠ¥å¯ç”¨åŒ…çš„ä¿¡æ¯**

```go
$ go list github.com/go-sql-driver/mysql
github.com/go-sql-driver/mysql

$ go list ...  // åˆ—å‡ºå·¥ä½œåŒºä¸­çš„æ‰€æœ‰åŒ…

$ go list gopl.io/ch3/...  // æˆ–è€…æ˜¯ç‰¹å®šå­ç›®å½•ä¸‹çš„æ‰€æœ‰åŒ…

$ go list ...xml...  // æˆ–è€…æ˜¯å’ŒæŸä¸ªä¸»é¢˜ç›¸å…³çš„æ‰€æœ‰åŒ…

$ go list -json hash  // è·å–æ¯ä¸ªåŒ…å®Œæ•´çš„å…ƒä¿¡æ¯
```





**åŒ…çš„åˆå§‹åŒ–ï¼š****é¦–å…ˆæ˜¯è§£å†³åŒ…çº§å˜é‡çš„ä¾èµ–é¡ºåº**ï¼Œ**ç„¶åæŒ‰ç…§åŒ…çº§å˜é‡å£°æ˜å‡ºç°çš„é¡ºåºä¾æ¬¡åˆå§‹åŒ–**ï¼š

```go
var a = b + c // a ç¬¬ä¸‰ä¸ªåˆå§‹åŒ–, ä¸º 3
var b = f()   // b ç¬¬äºŒä¸ªåˆå§‹åŒ–, ä¸º 2, é€šè¿‡è°ƒç”¨ f (ä¾èµ–c)
var c = 1     // c ç¬¬ä¸€ä¸ªåˆå§‹åŒ–, ä¸º 1

func f() int { return c + 1 }
```

å¦‚æœåŒ…ä¸­å«æœ‰å¤šä¸ª.goæºæ–‡ä»¶ï¼Œå®ƒä»¬å°†æŒ‰ç…§å‘ç»™ç¼–è¯‘å™¨çš„é¡ºåºè¿›è¡Œåˆå§‹åŒ–ï¼ŒGoè¯­è¨€çš„æ„å»ºå·¥å…·**é¦–å…ˆä¼šå°†.goæ–‡ä»¶æ ¹æ®æ–‡ä»¶åæ’åº****ï¼Œç„¶åä¾æ¬¡è°ƒç”¨ç¼–è¯‘å™¨ç¼–è¯‘**ã€‚

å¯¹äºåœ¨åŒ…çº§åˆ«å£°æ˜çš„å˜é‡ï¼Œå¦‚æœ**æœ‰åˆå§‹åŒ–è¡¨è¾¾å¼åˆ™ç”¨è¡¨è¾¾å¼åˆå§‹åŒ–**ï¼Œè¿˜æœ‰ä¸€äº›æ²¡æœ‰åˆå§‹åŒ–è¡¨è¾¾å¼çš„ï¼ˆå¦‚æŸäº›è¡¨æ ¼æ•°æ®åˆå§‹åŒ–å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„èµ‹å€¼è¿‡ç¨‹ï¼‰**å¯ä»¥ç”¨ä¸€ä¸ªç‰¹æ®Šçš„initåˆå§‹åŒ–å‡½æ•°æ¥ç®€åŒ–åˆå§‹åŒ–å·¥ä½œ**ã€‚æ¯ä¸ªæ–‡ä»¶éƒ½å¯ä»¥åŒ…å«å¤šä¸ªinitåˆå§‹åŒ–å‡½æ•°ã€‚è¿™æ ·çš„initåˆå§‹åŒ–å‡½æ•°**é™¤äº†ä¸èƒ½è¢«è°ƒç”¨æˆ–å¼•ç”¨å¤–**ï¼Œå…¶ä»–è¡Œä¸ºå’Œæ™®é€šå‡½æ•°ç±»ä¼¼ã€‚åœ¨æ¯ä¸ª**æ–‡ä»¶ä¸­çš„init**åˆå§‹åŒ–å‡½æ•°ï¼Œ**åœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶æŒ‰ç…§å®ƒä»¬å£°æ˜çš„é¡ºåº****è¢«è‡ªåŠ¨è°ƒç”¨**ã€‚

```go
func init() { /* ... */ }
```

æ¯ä¸ªåŒ…åœ¨è§£å†³ä¾èµ–çš„å‰æä¸‹ï¼Œä»¥å¯¼å…¥å£°æ˜çš„é¡ºåºåˆå§‹åŒ–ï¼Œæ¯ä¸ªåŒ…åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªpåŒ…å¯¼å…¥äº†qåŒ…ï¼Œé‚£ä¹ˆåœ¨påŒ…åˆå§‹åŒ–çš„æ—¶å€™å¯ä»¥è®¤ä¸ºqåŒ…å¿…ç„¶å·²ç»åˆå§‹åŒ–è¿‡äº†ã€‚

åˆå§‹åŒ–å·¥ä½œæ˜¯**è‡ªä¸‹è€Œä¸Šè¿›è¡Œçš„**ï¼Œ**mainåŒ…æœ€åè¢«åˆå§‹åŒ–**ã€‚å¯ä»¥ç¡®ä¿åœ¨mainå‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œæ‰€æœ‰ä¾èµ–çš„åŒ…éƒ½å·²ç»å®Œæˆåˆå§‹åŒ–å·¥ä½œäº†ã€‚



## äºŒã€Go mod

> ğŸ’¡ go module = go.mod + package + subsâ€¦

go.modæ–‡ä»¶ï¼šå­˜å‚¨äº†æ¨¡å—è·¯å¾„ã€ç¼–è¯‘å™¨ç‰ˆæœ¬ï¼Œä»¥åŠä¾èµ–é¡¹åˆ—è¡¨ã€‚

æ¨¡å—æ˜¯ä¾èµ–ç®¡ç†æ–¹å¼ï¼Œæ˜¯å‘å¸ƒå’Œç‰ˆæœ¬æ§åˆ¶å•å…ƒã€‚

å¦‚æœå­ç›®å½•åŒ…å« go.modï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯ç‹¬ç«‹æ¨¡å—ï¼Œä¸å†å±äºå½“å‰æ¨¡å—ã€‚



```shell
$ go mod init openapi.  # åˆå§‹åŒ–æ¨¡å—
go: creating new go.mod: module openapi
```



**ä¾èµ–ç®¡ç†ï¼š**

```shell
$ go get [example.com/my@lastet](http://example.com/my@lastet)   # æ·»åŠ ã€ä¸‹è½½ï¼ˆæ›´æ–°ï¼‰ä¾èµ–é¡¹ 
```

1. ä» GOPROXY ä¸‹è½½æºç åˆ°æœ¬åœ°ç¼“å­˜ GOMODCACHE ç›®å½•
1. å‘ go.mod go.sum æ·»åŠ ä¾èµ–é¡¹å’ŒéªŒè¯ä¿¡æ¯
1. ä½¿ç”¨ go clean -modcache æ¸…é™¤ç¼“å­˜ï¼ˆè‡ªåŠ¨é‡æ–°ä¸‹è½½ï¼‰
```shell
$ go mod tidy # æ·»åŠ é—æ¼çš„ã€ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–é¡¹
$ go mod edit -require  example.com/my@v1.3.4
```



**ç‰ˆæœ¬æ ‡è¯†ï¼š**

```shell
v(major).(minor).(patch)-(pre|beta)
  ä¸»è¦     æ¬¡è¦     è¡¥ä¸    é¢„å‘è¡Œæˆ–æµ‹è¯•ç‰ˆ
  
v1.2.3
v1.2.3-pre
v1.5.0-beta

v0.0.0-20191109021931-daa7c04131f5 --> go get example.com/my@daa7c041
```



**å·¥ä½œç©ºé—´**ï¼ˆworkspaceï¼‰ï¼šè§£å†³å¤šæ¨¡å—å¼€å‘é‡åˆ°çš„é—®é¢˜ã€‚

- ç¼–è¯‘æ—¶ï¼Œæ‰¾ä¸åˆ°æœªå‘å¸ƒæ¨¡å—ï¼ˆéå­åŒ…ï¼‰ã€‚
- åªèƒ½ä»¥ replace  å°†æ¨¡å—è·¯å¾„æ›¿æ¢ä¸ºæœ¬åœ°è·¯å¾„ã€‚
- æ±¡æŸ“çš„ go.mod æ„å¤–æäº¤åˆ°ä»£ç ä»“åº“ã€‚
```shell
$ go work init # åˆå§‹åŒ–å·¥ä½œç©ºé—´
$ go work use ./test ./mylib
```



```shell
// go.work
go 1.18

use (
	./test 
	./mylib
)
```





***æ›´å¤šè¯¦æƒ…ï¼Œè§å®˜æ–¹æ–‡æ¡£****ï¼š*

[https://go.dev/ref/mod](https://go.dev/ref/mod) 

[https://go.dev/doc/modules/managing-dependencies](https://go.dev/doc/modules/managing-dependencies)

